var wuExtentionEditor;function renderMediaUploader(t){"use strict";var e,i;void 0===e&&(e=wp.media.frames.file_frame=wp.media({title:"Upload Image",button:{text:"Select Image"},multiple:!1})).on("select",function(){i=e.state().get("selection").first().toJSON(),jQuery("."+t+"-preview").attr("src",i.url),jQuery("."+t).attr("value",i.id)}),e.open()}window.wp=window.wp||{},function(o,t){wuExtentionEditor={init:function(){var t=this,e=o("#inline-edit");t.type="plugins",t.what="#"+t.type+"-",o("#the-list").on("click","a.editinline",function(){return wuExtentionEditor.edit(this),!1}),e.keyup(function(t){if(27===t.which)return wuExtentionEditor.revert()}),o(".cancel",e).click(function(){return wuExtentionEditor.revert()}),o(".save",e).click(function(){return wuExtentionEditor.save(this)}),o("input, select",e).keydown(function(t){if(13===t.which)return wuExtentionEditor.save(this)}),o('#posts-filter input[type="submit"]').mousedown(function(){t.revert()})},edit:function(n){var r,t=this;t.revert(),"object"==typeof n&&(n=t.getId(n)),t.file=o('tr[data-slug="'+n+'"]').data("plugin"),r=o("#inline-edit").clone(!0),o("#inline_"+n),o("td",r).attr("colspan",o("th:visible, td:visible",".wp-list-table.widefat:first thead").length),o('tr[data-slug="'+n+'"]').hide().after(r).after('<tr class="hidden"></tr>');return o.each(["blogname","blogdescription","wu_categories","template_img-preview","template_img"],function(t,e){if(value=o('[name="field_'+e+'"]',o('tr[data-slug="'+n+'"]')).val(),"template_img-preview"===e)return o(".template_img-preview").attr("src",value),!0;var i=o('[name="'+e+'"]',r);"checkbox"===i.attr("type")?value&&i.click():i.val(value)}),o(r).attr("id",n).addClass("inline-editor").show(),o(".ptitle",r).eq(0).focus(),!1},save:function(a){var t;o('input[name="taxonomy"]').val();return"object"==typeof a&&(a=this.getId(a)),o("table.widefat .spinner").addClass("is-active"),t={action:"wu_save_site_template",extension_id:a},t=o("#"+a).find(":input").serialize()+"&"+o.param(t),o.post(ajaxurl,t,function(t){var e,i,n,r=o("#"+a+" .inline-edit-save .error");o("table.widefat .spinner").removeClass("is-active"),t?-1!==t.indexOf("<tr")?(o('tr[data-slug="'+a+'"]').siblings("tr.hidden").addBack().remove(),i=o(t).attr("data-slug"),o("#"+a).before(t).remove(),e=i?(n=i.replace(wuExtentionEditor.type+"-",""),o('tr[data-slug="'+i+'"]')):(n=a,o(wuExtentionEditor.what+a)),o("#parent").find("option[value="+n+"]").text(e.find(".row-title").text()),e.hide().fadeIn(400,function(){e.find(".editinline").focus()})):r.html(t).show():r.html(inlineEditL10n.error).show()}),!1},revert:function(){var t=o("table.widefat tr.inline-editor").attr("id");t&&(o("table.widefat .spinner").removeClass("is-active"),o("#"+t).siblings("tr.hidden").addBack().remove(),o('tr[data-slug="'+t+'"]').show().find(".editinline").focus())},getId:function(t){var e=o(t).parents("tr"),i=e.find('[name="allblogs[]"]').attr("id");return(i=(i=i||e.attr("id"))||"blog_1").indexOf("wu_")<0&&(i="wu_"+i),e.is(".inline-edit-row")||e.attr("data-slug",i),i}},o(document).ready(function(){wuExtentionEditor.init()})}(jQuery,window.wp),jQuery(".wu-field-button-upload").on("click",function(t){t.preventDefault(),renderMediaUploader(jQuery(this).data("target"))}),jQuery(".wu-field-button-upload-remove").on("click",function(t){t.preventDefault();var e=jQuery(this).data("target");jQuery("."+e+"-preview").removeAttr("src"),jQuery("."+e).attr("value","")});