!function(n){n(document).ready(function(){n.ajaxSetup({error:function(e,t,o){console.log(o),webhook_page.loading=!1,webhook_page.activeWebhook=!1,webhook_page.sending=!1,webhook_page.editing=!1,wuswal({title:wu_webhook_page_vars.error_title,text:wu_webhook_page_vars.error_message,type:"error",html:!0,showCloseButton:!0,showCancelButton:!1})}}),webhook_page=new Vue({el:"#wp-ultimo-wrap",data:{is_enabled:wu_webhook_page_vars.are_webhooks_enabled,selected:[],webhooks:wu_webhook_page_vars.webhooks_list,editing:!1,activeWebhook:!1,loading:!1,sending:!1,integrations:wu_webhook_page_vars.integrations,filter:"*"},computed:{selectedAll:function(){return this.webhooks.length==this.selected.length&&0<this.webhooks.length}},methods:{filterWebhooks:function(e,t){this.filter=e,t.preventDefault();var o=this;this.loading=!0,n.post(ajaxurl,{action:"wu_get_webhooks",filter:o.filter,_wpnonce:n("#_wpnonce").val(),_wp_http_referer:n('[name="_wp_http_referer"]').val()},function(e){o.webhooks=e,o.editing=!1,o.activeWebhook=!1,o.loading=!1})},selectAll:function(){this.selected=this.selectedAll?[]:this.webhooks.map(function(e){return e.id})},reAddTooltip:function(){jQuery(".wu-tooltip").tipTip()},checkEdit:function(e){return this.activeWebhook.id==e&&!1!==this.activeWebhook.id},checkSending:function(e){return this.sending==e&&!1!==this.sending},edit:function(e,t){e.preventDefault(),this.editing=!0,this.activeWebhook=t,this.moveInlineEdit(e.target)},moveInlineEdit:function(e){var t=n(e).is("tr")?n(e):n(e).parents("tr");n("#placeholder, #inline-edit").insertAfter(t)},stopEdit:function(e){e.preventDefault(),this.activeWebhook=!1,this.editing=!1},addNew:function(e){e.preventDefault(),this.moveInlineEdit(n("#the-list tr:last"));this.activeWebhook={id:!1,name:wu_webhook_page_vars.new_message,url:"https://url.test",event:"",sent_events_count:0,active:1},this.editing=!0,setTimeout(function(){n("#inline-edit").find("input:first").focus()},100)},sendTestEvent:function(e,t){e.preventDefault();var o=this;this.sending=t.id,n.post(ajaxurl,{action:"wu_send_test_webhook",data:t,_wpnonce:n("#_wpnonce").val(),_wp_http_referer:n('[name="_wp_http_referer"]').val()},function(e){o.webhooks=e.webhooks,o.sending=!1,wuswal({title:wu_webhook_page_vars.test_title,type:"success",text:wu_webhook_page_vars.test_message+'<br><pre class="wuswal-pre">'+JSON.stringify(JSON.parse(e.response),null,2)+"</pre>",html:!0,showCloseButton:!0,showCancelButton:!1})})},remove:function(e,t){e.preventDefault();var o=this;this.loading=!0,n.post(ajaxurl,{action:"wu_delete_webhook",data:[t.id],_wpnonce:n("#_wpnonce").val(),_wp_http_referer:n('[name="_wp_http_referer"]').val()},function(e){o.webhooks=e,o.editing=!1,o.activeWebhook=!1,o.loading=!1})},removeMany:function(e){e.preventDefault();var t=this;this.loading=!0,n.post(ajaxurl,{action:"wu_delete_webhook",data:t.selected,_wpnonce:n("#_wpnonce").val(),_wp_http_referer:n('[name="_wp_http_referer"]').val()},function(e){t.webhooks=e,t.editing=!1,t.activeWebhook=!1,t.loading=!1})},update:function(e,t){e.preventDefault();var o=this;this.loading=!0,n.post(ajaxurl,{action:"wu_update_webhook",data:t,_wpnonce:n("#_wpnonce").val(),_wp_http_referer:n('[name="_wp_http_referer"]').val()},function(e){o.webhooks=e,o.editing=!1,o.activeWebhook=!1,o.loading=!1})}}})})}(jQuery);